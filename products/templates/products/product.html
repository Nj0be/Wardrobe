<div class="flex flex-col justify-center items-center my-16">
  <div class="grid grid-cols-2 justify-center gap-10 w-3/5">
    <!-- Image Gallery -->
    <div>
      {% for image in images %}
        <img src="{{ image.url }}" alt="{{ product.name }}" class="w-120 h-full">
      {% endfor %}
    </div>
    <!-- Product Details -->
    <div>
      <div>
        <h1 class="text-7xl mt-10">{{ product.name }}</h1>
        <hr class="my-10">
        <p class="my-10">{{ product.description }}</p>
        <p class="text-3xl my-10">{{ price }} €</p>


        {% if discount %}
          <p><strong>Sconto:</strong> {{ product.discount_percentage }}%</p>
        {% endif %}
      </div>

      <div>
        <!-- Sezione colori -->
        {% if colors|length %}
          <label for="color_{{ color.id }}">
            Colore: {{ selected_color.name }}
          </label>
          <ul class="grid w-full gap-4 md:grid-cols-4">
            {% for color in colors %}
              <li>
                <input type="radio" name="color" id="color_{{ color.id }}" class="hidden peer"
                    {% if color == selected_color %} checked {% endif %}
                    {% if forloop.first %} required {% endif %}
                       hx-get="{% url 'product_color' product.id color.id %}"
                       hx-target="#content"
                       hx-push-url="true"
                       hx-params="none"
                       preload="mouseover" preload-images="true"
                >
                <label for="color_{{ color.id }}" style="background-color:#{{ color.hex }};"
                       class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue3 peer-checked:text-blue3 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700"></label>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

      <!-- Product Variations -->
      <form id="cart-add-form" method="post">{% csrf_token %}
        <!-- Sezione taglie -->
        <h2 class="text-4xl mt-10">Taglia</h2>
        <ul class="grid w-full gap-4 md:grid-cols-4">
          {% for size, variant in size_variants.items %}
            <li>
              <input type="radio" name="variant_id" id="size_{{ size.id }}" value="{{ variant.id }}"
                     class="hidden peer" required
                     hx-get="{% url 'product_color_size' product.id selected_color.id size.id %}"
                     hx-target="#content"
                     hx-push-url="true"
                     hx-params="none"
                  {% if size == selected_size %} checked {% endif %}
                  {% if not variant %} disabled {% endif %}
              >
              <label for="size_{{ size.id }}"
                     class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue3 peer-checked:text-blue3 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                <div class="block">
                  <div class="w-full text-lg font-semibold">{{ size.name }} </div>
                  {% if not variant %}
                    <div class="w-full">Non
                      Disponibile
                    </div>
                  {% endif %}
                </div>
              </label>
            </li>
          {% endfor %}
        </ul>

        <div class="grid grid-cols-1 justify-center items-center gap-4 mt-10">
          <div class="grid grid-cols-2">
            <label for="quantity">Quantità:</label>
            <input type="number" id="quantity" name="quantity" min="1" max="{{ stock }}" value="1"
                {% if selected_size == None %} disabled {% endif %}>
          </div>
          <button type="submit" {% if selected_size == None %} disabled {% endif %}
                  class="text-white bg-blue2 hover:bg-blue-800 focus:ring-4 focus:outline-none
                                focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5
                                text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800
                                disabled:bg-gray-300"
                  id="add-to-cart-btn"
                  hx-post="{% url "cart_add" %}"
                  hx-target="#modal"
          >Aggiungi al carrello
          </button>
        </div>
      </form>
    </div>

  </div>
  <div class="w-3/5">
    <!-- Sezione delle recensioni -->
    <div id="reviews" class="mt-14">
      <hr class="mb-10">
      <h2 class="text-5xl">Recensioni</h2>
      {% if reviews %}
        {% for review in reviews %}
          {% include "products/review.html" %}
        {% endfor %}
      {% else %}
        <p id="no-reviews" class="text-2xl mt-2">Non ci sono recensioni per questo prodotto.</p>
      {% endif %}
    </div>

    <!-- Sezione aggiungi recensione -->
    {% include "products/add_review.html" %}
  </div>
</div>
